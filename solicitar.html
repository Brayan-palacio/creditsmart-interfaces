<!-- Commit: validaciones formulario -->
<!doctype html>
<html lang="es">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>CreditSmart - Solicitar Crédito</title>
  <script src="https://cdn.tailwindcss.com"></script>
  <link rel="stylesheet" href="styles.css">
</head>
<body class="bg-slate-50 text-slate-900">
  <header class="bg-white shadow-sm">
    <div class="max-w-6xl mx-auto px-4 py-4 flex items-center justify-between">
      <h1 class="text-xl font-semibold">CreditSmart</h1>
      <nav aria-label="Navegación principal" class="space-x-3">
        <a href="index.html" class="text-slate-600 hover:text-indigo-600">Catálogo</a>
        <a href="simulador.html" class="text-slate-600 hover:text-indigo-600">Simulador</a>
        <a href="solicitar.html" class="text-indigo-600" aria-current="page">Solicitar Crédito</a>
      </nav>
    </div>
  </header>

  <main class="max-w-3xl mx-auto px-4 py-8">
    <section class="bg-white p-6 rounded-lg shadow-sm" aria-labelledby="form-title">
      <h2 id="form-title" class="text-2xl font-bold">Solicitud de Crédito</h2>
      <p class="text-slate-600 mt-2">Completa el formulario con tus datos. Los campos con * son obligatorios.</p>

      <form id="solForm" class="mt-4 space-y-4" novalidate aria-describedby="form-desc">
        <p id="form-desc" class="sr-only">Formulario para solicitar crédito. Se validan datos obligatorios y formatos.</p>

        <fieldset class="border p-4 rounded" aria-labelledby="personal-legend">
          <legend id="personal-legend" class="font-semibold">Información personal</legend>

          <label class="block">
            <span class="text-sm font-medium">Nombre completo *</span>
            <input type="text" id="nombre" required class="mt-1 block w-full rounded-md border-gray-200 p-2" aria-required="true" />
            <span class="text-xs text-red-600 hidden" id="err-nombre">Nombre requerido</span>
          </label>

          <label class="block">
            <span class="text-sm font-medium">Documento de identidad *</span>
            <input type="text" id="documento" required pattern="\d{6,15}" class="mt-1 block w-full rounded-md border-gray-200 p-2" aria-required="true" />
            <span class="text-xs text-red-600 hidden" id="err-documento">Número de documento inválido (solo dígitos).</span>
          </label>

          <label class="block">
            <span class="text-sm font-medium">Correo electrónico *</span>
            <input type="email" id="correo" required class="mt-1 block w-full rounded-md border-gray-200 p-2" aria-required="true" />
            <span class="text-xs text-red-600 hidden" id="err-correo">Correo inválido</span>
          </label>

          <label class="block">
            <span class="text-sm font-medium">Teléfono *</span>
            <input type="tel" id="telefono" required pattern="\+?\d{7,15}" class="mt-1 block w-full rounded-md border-gray-200 p-2" aria-required="true" />
            <span class="text-xs text-red-600 hidden" id="err-telefono">Teléfono inválido</span>
          </label>
        </fieldset>

        <fieldset class="border p-4 rounded" aria-labelledby="credito-legend">
          <legend id="credito-legend" class="font-semibold">Detalles del crédito</legend>

          <label class="block">
            <span class="text-sm font-medium">Producto</span>
            <select id="producto" class="mt-1 block w-full rounded-md border-gray-200 p-2" aria-label="Producto de crédito">
              <option>Crédito Personal</option>
              <option>Crédito Vehicular</option>
              <option>Crédito Hipotecario</option>
            </select>
          </label>

          <label class="block">
            <span class="text-sm font-medium">Monto solicitado (COP) *</span>
            <input type="number" id="monto" min="100000" required class="mt-1 block w-full rounded-md border-gray-200 p-2" aria-required="true" />
            <span class="text-xs text-red-600 hidden" id="err-monto">Ingrese un monto mínimo de 100,000 COP</span>
          </label>

          <label class="block">
            <span class="text-sm font-medium">Plazo (meses) *</span>
            <input type="number" id="plazo" min="6" required class="mt-1 block w-full rounded-md border-gray-200 p-2" aria-required="true" />
            <span class="text-xs text-red-600 hidden" id="err-plazo">Plazo mínimo 6 meses</span>
          </label>
        </fieldset>

        <div class="flex gap-3">
          <button class="px-4 py-2 bg-indigo-600 text-white rounded" type="submit">Enviar solicitud</button>
          <button class="px-4 py-2 border rounded text-indigo-600" type="reset">Limpiar</button>
        </div>

        <p class="text-sm text-slate-500 mt-2">Al enviar aceptas que tus datos sean usados para la evaluación de la solicitud.</p>
      </form>

      <div id="confirm" class="mt-4 bg-white p-4 rounded shadow hidden" role="status" aria-live="polite">
        <h3 class="text-lg font-semibold">Solicitud recibida</h3>
        <p class="mt-2 text-slate-700">Gracias. Tu solicitud ha sido registrada y un asesor se comunicará contigo.</p>
      </div>
    </section>
  </main>

  <footer class="mt-8 border-t bg-white">
    <div class="max-w-6xl mx-auto px-4 py-4 text-sm text-slate-600">
      CreditSmart &copy; <span id="year"></span>
    </div>
  </footer>

  <script>
    document.getElementById('year').textContent = new Date().getFullYear();

    // Enhanced client-side validation with inline feedback
    const solForm = document.getElementById('solForm');
    function showError(id) {
      document.getElementById(id).classList.remove('hidden');
    }
    function hideError(id) {
      document.getElementById(id).classList.add('hidden');
    }

    solForm.addEventListener('submit', function(e) {
      e.preventDefault();
      let valid = true;

      const nombre = document.getElementById('nombre').value.trim();
      if (!nombre) { showError('err-nombre'); valid = false; } else hideError('err-nombre');

      const documento = document.getElementById('documento');
      if (!/^[0-9]{6,15}$/.test(documento.value)) { showError('err-documento'); valid = false; } else hideError('err-documento');

      const correo = document.getElementById('correo');
      if (!/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(correo.value)) { showError('err-correo'); valid = false; } else hideError('err-correo');

      const telefono = document.getElementById('telefono');
      if (!/^\+?\d{7,15}$/.test(telefono.value)) { showError('err-telefono'); valid = false; } else hideError('err-telefono');

      const monto = Number(document.getElementById('monto').value);
      if (isNaN(monto) || monto < 100000) { showError('err-monto'); valid = false; } else hideError('err-monto');

      const plazo = Number(document.getElementById('plazo').value);
      if (isNaN(plazo) || plazo < 6) { showError('err-plazo'); valid = false; } else hideError('err-plazo');

      if (!valid) {
        const firstErr = document.querySelector('.text-red-600:not(.hidden)');
        if (firstErr) firstErr.scrollIntoView({behavior:'smooth', block:'center'});
        return;
      }

      // Simulate submission
      solForm.hidden = true;
      document.getElementById('confirm').classList.remove('hidden');
      window.scrollTo({top:0, behavior:'smooth'});
    });
  </script>
</body>
</html>
